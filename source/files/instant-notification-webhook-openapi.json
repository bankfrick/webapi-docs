{
  "openapi": "3.1.0",
  "info": {
    "title": "Bank Frick Webhook Contract",
    "description": "This specification describes the HTTP POST requests that Bank Frick\nwill send to customer-configured webhook URLs.\n\nCustomers should implement an HTTPS endpoint that accepts the WebhookPayload structure.\nThe webhook URL is configured per notification rule and can be any HTTPS endpoint.",
    "version": "0.1.0"
  },
  "servers": [
    {
      "url": "https://example.com/api/webhooks/bankfrick",
      "description": "Example webhook endpoint (replace with your actual endpoint)"
    }
  ],
  "paths": {},
  "components": {
    "schemas": {
      "AccountDto": {
        "type": "object",
        "description": "Account details",
        "properties": {
          "Id": {
            "$ref": "#/components/schemas/AccountIdDto",
            "description": "Account identification"
          }
        }
      },
      "AccountIdDto": {
        "type": "object",
        "description": "Account identification",
        "properties": {
          "IBAN": {
            "type": "string",
            "description": "Account ID (IBAN)",
            "example": "LI21088110101234567890"
          }
        }
      },
      "AgentDto": {
        "type": "object",
        "description": "Agent (bank) information",
        "properties": {
          "FinancialInstitution": {
            "$ref": "#/components/schemas/FinancialInstitutionDto",
            "description": "Financial institution details"
          }
        }
      },
      "FinancialInstitutionDto": {
        "type": "object",
        "description": "Financial institution information",
        "properties": {
          "BIC": {
            "type": "string",
            "description": "BIC code",
            "example": "BFRILI22XXX"
          }
        }
      },
      "PartyDto": {
        "type": "object",
        "description": "Party information (creditor or debtor)",
        "properties": {
          "Name": {
            "type": "string",
            "description": "Name of the party",
            "example": "John Smith"
          },
          "PostalAddress": {
            "$ref": "#/components/schemas/PostalAddressDto",
            "description": "Postal address of the party"
          }
        }
      },
      "PostalAddressDto": {
        "type": "object",
        "description": "Postal address information",
        "properties": {
          "BuildingNumber": {
            "type": "string",
            "description": "Building number",
            "example": 42
          },
          "Country": {
            "type": "string",
            "description": "Country code",
            "example": "LU"
          },
          "CountrySubDivision": {
            "type": "string",
            "description": "Country subdivision",
            "example": "Luxembourg District"
          },
          "Department": {
            "type": "string",
            "description": "Department",
            "example": "Finance Department"
          },
          "DistrictName": {
            "type": "string",
            "description": "District name",
            "example": "Centre"
          },
          "Postbox": {
            "type": "string",
            "description": "Post box",
            "example": "PO Box 123"
          },
          "PostalCode": {
            "type": "string",
            "description": "Postal code",
            "example": "L-1234"
          },
          "Room": {
            "type": "string",
            "description": "Room",
            "example": "Room 301"
          },
          "StreetName": {
            "type": "string",
            "description": "Street name",
            "example": "Avenue de la Liberté"
          },
          "SubDepartment": {
            "type": "string",
            "description": "Sub-department",
            "example": "Accounting"
          },
          "TownLocationName": {
            "type": "string",
            "description": "Town location name",
            "example": "City Center"
          },
          "TownName": {
            "type": "string",
            "description": "Town name",
            "example": "Luxembourg"
          },
          "AddressLine": {
            "type": "array",
            "description": "Unstructured address lines",
            "example": [
              "Avenue de la Liberté 42",
              "3rd Floor"
            ],
            "items": {
              "type": "string"
            }
          }
        }
      },
      "RemittanceInformationDto": {
        "type": "object",
        "description": "Remittance information",
        "properties": {
          "UnstructuredReference": {
            "type": "array",
            "description": "Unstructured remittance references",
            "example": [
              "INV-2025-001789",
              "Payment for services"
            ],
            "items": {
              "type": "string"
            }
          }
        }
      },
      "TransactionAmountDto": {
        "type": "object",
        "description": "Transaction amount",
        "properties": {
          "Currency": {
            "type": "string",
            "description": "Currency code",
            "example": "EUR"
          },
          "Amount": {
            "type": "string",
            "description": "Amount value",
            "example": 150.5
          }
        }
      },
      "WebhookPayloadDto": {
        "type": "object",
        "description": "Webhook notification payload with ISO 20022 transaction data",
        "properties": {
          "AcceptanceDateTime": {
            "type": "string",
            "description": "Acceptance date and time",
            "example": "2025-11-18T15:41:46.141Z"
          },
          "Creditor": {
            "$ref": "#/components/schemas/PartyDto",
            "description": "Creditor party information"
          },
          "CreditorAccount": {
            "$ref": "#/components/schemas/AccountDto",
            "description": "Creditor account details"
          },
          "CreditorAgent": {
            "$ref": "#/components/schemas/AgentDto",
            "description": "Creditor agent (bank) information"
          },
          "Debtor": {
            "$ref": "#/components/schemas/PartyDto",
            "description": "Debtor party information"
          },
          "DebtorAccount": {
            "$ref": "#/components/schemas/AccountDto",
            "description": "Debtor account details"
          },
          "DebtorAgent": {
            "$ref": "#/components/schemas/AgentDto",
            "description": "Debtor agent (bank) information"
          },
          "TransactionAmount": {
            "$ref": "#/components/schemas/TransactionAmountDto",
            "description": "Transaction amount and currency"
          },
          "RemittanceInformation": {
            "$ref": "#/components/schemas/RemittanceInformationDto",
            "description": "Remittance information"
          }
        }
      },
      "ProblemDetail": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "format": "uri"
          },
          "title": {
            "type": "string"
          },
          "status": {
            "type": "integer",
            "format": "int32"
          },
          "detail": {
            "type": "string"
          },
          "instance": {
            "type": "string",
            "format": "uri"
          },
          "properties": {
            "type": "object",
            "additionalProperties": {}
          }
        }
      }
    }
  },
  "webhooks": {
    "notificationWebhook": {
      "post": {
        "summary": "Webhook notification",
        "description": "Bank Frick will POST webhook notifications to the URL you configure in your notification rule.\n\nYou can configure any HTTPS endpoint URL. The path is entirely up to you.\n\nExample URLs:\n- https://your-domain.com/api/webhooks/bankfrick\n- https://your-domain.com/notifications\n- https://api.your-service.com/v1/incoming-webhooks",
        "parameters": [
          {
            "name": "Algorithm",
            "in": "header",
            "description": "Signature algorithm used to sign the webhook payload",
            "required": true,
            "schema": {
              "type": "string",
              "enum": [
                "rsa-sha512"
              ],
              "example": "rsa-sha512"
            }
          },
          {
            "name": "Signature",
            "in": "header",
            "description": "Base64-encoded RSA signature of the webhook payload. Verify using the public key to ensure the webhook came from Bank Frick",
            "required": true,
            "schema": {
              "type": "string",
              "example": "MEUCIQDf...truncated..."
            }
          }
        ],
        "requestBody": {
          "description": "Webhook notification payload",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WebhookPayloadDto"
              },
              "examples": {
                "instant_payment_received_address_lines": {
                  "summary": "Instant payment received with unstructured address lines in postal address",
                  "description": "instant_payment_received_address_lines",
                  "value": {
                    "AcceptanceDateTime": "2025-11-18T15:41:46.141Z",
                    "Creditor": {
                      "Name": "Bank Frick Ltd",
                      "PostalAddress": {
                        "TownName": "Vaduz",
                        "Country": "LI",
                        "AddressLine": [
                          "Sägerstrasse 6",
                          "Suite 500",
                          "Banking District",
                          "Treasury Department",
                          "International Payments",
                          "PO Box 123",
                          "Vaduz, LI 9490"
                        ]
                      }
                    },
                    "CreditorAccount": {
                      "Id": {
                        "IBAN": "LI08088110102720K000E"
                      }
                    },
                    "CreditorAgent": {
                      "FinancialInstitution": {
                        "BIC": "BFRILI22"
                      }
                    },
                    "Debtor": {
                      "Name": "John Smith",
                      "PostalAddress": {
                        "TownName": "Luxembourg",
                        "Country": "LU",
                        "AddressLine": [
                          "Boulevard de la Foire 42",
                          "Room 301",
                          "Finance Department",
                          "Payment Operations",
                          "Downtown Luxembourg",
                          "PO Box 456",
                          "Luxembourg, LU L-2411"
                        ]
                      }
                    },
                    "DebtorAccount": {
                      "Id": {
                        "IBAN": "LU280019400644750000"
                      }
                    },
                    "DebtorAgent": {
                      "FinancialInstitution": {
                        "BIC": "ARSPLU21"
                      }
                    },
                    "TransactionAmount": {
                      "Currency": "EUR",
                      "Amount": 150.5
                    },
                    "RemittanceInformation": {
                      "UnstructuredReference": [
                        "INV-2025-001789"
                      ]
                    }
                  }
                },
                "instant_payment_received_structured_address": {
                  "summary": "Instant payment received with structured address fields in postal address",
                  "description": "instant_payment_received_structured_address",
                  "value": {
                    "AcceptanceDateTime": "2025-11-18T15:41:46.141Z",
                    "Creditor": {
                      "Name": "Bank Frick Ltd",
                      "PostalAddress": {
                        "StreetName": "Sägerstrasse",
                        "BuildingNumber": "6",
                        "PostalCode": "9490",
                        "TownName": "Vaduz",
                        "Country": "LI",
                        "CountrySubDivision": "Vaduz District",
                        "Department": "Treasury",
                        "DistrictName": "Upper Vaduz",
                        "Postbox": "PO Box 123",
                        "Room": "Suite 500",
                        "SubDepartment": "International Payments",
                        "TownLocationName": "Banking District"
                      }
                    },
                    "CreditorAccount": {
                      "Id": {
                        "IBAN": "LI08088110102720K000E"
                      }
                    },
                    "CreditorAgent": {
                      "FinancialInstitution": {
                        "BIC": "BFRILI22"
                      }
                    },
                    "Debtor": {
                      "Name": "John Smith",
                      "PostalAddress": {
                        "StreetName": "Boulevard de la Foire",
                        "BuildingNumber": "42",
                        "PostalCode": "L-2411",
                        "TownName": "Luxembourg",
                        "Country": "LU",
                        "CountrySubDivision": "Luxembourg District",
                        "Department": "Finance Department",
                        "DistrictName": "Centre",
                        "Postbox": "PO Box 456",
                        "Room": "Room 301",
                        "SubDepartment": "Payment Operations",
                        "TownLocationName": "Downtown Luxembourg"
                      }
                    },
                    "DebtorAccount": {
                      "Id": {
                        "IBAN": "LU280019400644750000"
                      }
                    },
                    "DebtorAgent": {
                      "FinancialInstitution": {
                        "BIC": "ARSPLU21"
                      }
                    },
                    "TransactionAmount": {
                      "Currency": "EUR",
                      "Amount": 150.5
                    },
                    "RemittanceInformation": {
                      "UnstructuredReference": [
                        "INV-2025-001789"
                      ]
                    }
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "204": {
            "description": "Webhook received and accepted for processing"
          },
          "408": {
            "description": "Request Timeout - webhook will be retried",
            "content": {
              "application/problem+json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetail"
                },
                "examples": {
                  "timeout": {
                    "description": "timeout",
                    "value": {
                      "type": "about:blank",
                      "title": "Request Timeout",
                      "status": 408,
                      "detail": "The request timed out",
                      "instance": "/webhooks/bankfrick"
                    }
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - webhook will be retried",
            "content": {
              "application/problem+json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetail"
                },
                "examples": {
                  "too_many_requests": {
                    "description": "too_many_requests",
                    "value": {
                      "type": "about:blank",
                      "title": "Too Many Requests",
                      "status": 429,
                      "detail": "Too many requests have been received",
                      "instance": "/webhooks/bankfrick"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - webhook will be retried",
            "content": {
              "application/problem+json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetail"
                },
                "examples": {
                  "internal_server_error": {
                    "description": "internal_server_error",
                    "value": {
                      "type": "about:blank",
                      "title": "Internal Server Error",
                      "status": 500,
                      "detail": "An unexpected error occurred while processing your request",
                      "instance": "/webhooks/bankfrick"
                    }
                  }
                }
              }
            }
          },
          "502": {
            "description": "Bad Gateway - webhook will be retried",
            "content": {
              "application/problem+json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetail"
                },
                "examples": {
                  "bad_gateway": {
                    "description": "bad_gateway",
                    "value": {
                      "type": "about:blank",
                      "title": "Bad Gateway",
                      "status": 502,
                      "detail": "Bad gateway error occurred",
                      "instance": "/webhooks/bankfrick"
                    }
                  }
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable - webhook will be retried",
            "content": {
              "application/problem+json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetail"
                },
                "examples": {
                  "service_unavailable": {
                    "description": "service_unavailable",
                    "value": {
                      "type": "about:blank",
                      "title": "Service Unavailable",
                      "status": 503,
                      "detail": "The service is temporarily unavailable",
                      "instance": "/webhooks/bankfrick"
                    }
                  }
                }
              }
            }
          },
          "504": {
            "description": "Gateway Timeout - webhook will be retried",
            "content": {
              "application/problem+json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetail"
                },
                "examples": {
                  "gateway_timeout": {
                    "description": "gateway_timeout",
                    "value": {
                      "type": "about:blank",
                      "title": "Gateway Timeout",
                      "status": 504,
                      "detail": "Gateway timeout occurred",
                      "instance": "/webhooks/bankfrick"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}